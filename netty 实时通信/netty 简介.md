# Netty 简介

## netty 背景

### 普通 IO 的劣势

IO 模型中，一个连接来了，会创建一个线程，对应一个 while 死循环，死循环的目的就是不断监测这条连接上是否有数据可以读，大多数情况下，1w 个连接里面同一时刻只有少量的连接有数据可读，因此，很多个 while 死循环都白白浪费掉了，因为读不出啥数据。

会引发几个问题：

1. 线程资源受限：线程是操作系统中非常宝贵的资源，同一时刻有大量的线程处于阻塞状态会导致非常大的资源浪费。
2. 线程切换效率低下：单机 CPU 核数固定，线程爆炸之后操作系统频繁进行线程切换，应用性能急剧下降。
3. IO 编程中，数据读写是以字节流为单位，效率不高。

### NIO 编程

在 NIO 模型中，他把这么多 while 死循环变成一个死循环，这个死循环由一个线程控制。NIO 模型中 selector 的作用，一条连接来了之后，现在不创建一个 while 死循环去监听是否有数据可读了，而是直接把这条连接注册到 selector 上，然后，**通过检查 selector，就可以批量监测出有数据可读的连接，进而读取数据。**



